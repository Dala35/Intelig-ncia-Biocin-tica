<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Afrokódica - Módulo 6: Inteligência Biocinética (Restaurado)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #05020a; color: #f8fafc; margin: 0; overflow: hidden; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        .bg-void {
            background: radial-gradient(circle at 50% 50%, #0f0720 0%, #05020a 100%);
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.01);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8);
        }

        /* Animação Espectral Humana */
        @keyframes human-glow {
            0%, 100% { filter: drop-shadow(0 0 5px #ec4899) opacity(0.5); transform: scale(1); }
            50% { filter: drop-shadow(0 0 20px #8b5cf6) opacity(0.8); transform: scale(1.02); }
        }
        .human-spectrum {
            animation: human-glow 4s ease-in-out infinite;
        }

        @keyframes neural-flow {
            0% { stroke-dashoffset: 100; opacity: 0.2; }
            50% { opacity: 0.8; }
            100% { stroke-dashoffset: 0; opacity: 0.2; }
        }
        .neural-path {
            stroke-dasharray: 10;
            animation: neural-flow 3s linear infinite;
        }

        .custom-scroll::-webkit-scrollbar { width: 3px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(236, 72, 153, 0.3); border-radius: 10px; }
        
        .glow-text { text-shadow: 0 0 10px rgba(236, 72, 153, 0.5); }
        
        .grid-overlay {
            background-image: linear-gradient(rgba(236, 72, 153, 0.05) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(236, 72, 153, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
        }
    </style>
</head>
<body class="bg-void">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        const AI_MODES = [
            { id: 'biokinetic', label: 'Fluxo Biocinético', desc: 'Dados que se movem como organismos celulares africanos.' },
            { id: 'swarm', label: 'Inteligência de Enxame', desc: 'Decisões coletivas baseadas em harmonia comunitária.' },
            { id: 'oracle', label: 'Algoritmo Oracular', desc: 'Predição de padrões futuros via geometria sagrada.' }
        ];

        function IntroPortal({ onEnter }) {
            const [isActive, setIsActive] = useState(false);

            const activate = () => {
                setIsActive(true);
                const text = "Sincronizados. Bem-vindo à Inteligência Biocinética, o seu campo de observação e aprendizagem.";
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'pt-PT';
                    utterance.rate = 0.85;
                    utterance.pitch = 0.7;
                    utterance.onend = () => setTimeout(onEnter, 500);
                    window.speechSynthesis.speak(utterance);
                } else {
                    setTimeout(onEnter, 3500);
                }
            };

            return (
                <div className="fixed inset-0 z-[100] bg-[#05020a] flex flex-col items-center justify-center p-6">
                    <div className="relative w-80 h-[450px] mb-8 flex items-center justify-center">
                        <svg viewBox="0 0 100 150" className="w-full h-full human-spectrum">
                            <defs>
                                <linearGradient id="humanGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" stopColor="#ec4899" stopOpacity="0.9" />
                                    <stop offset="50%" stopColor="#8b5cf6" stopOpacity="0.6" />
                                    <stop offset="100%" stopColor="#ec4899" stopOpacity="0.2" />
                                </linearGradient>
                            </defs>
                            <circle cx="50" cy="25" r="12" fill="none" stroke="url(#humanGrad)" strokeWidth="0.5" />
                            <circle cx="50" cy="25" r="8" fill="none" stroke="url(#humanGrad)" strokeWidth="0.2" strokeDasharray="1 1" />
                            <path d="M50 37 L50 85 M30 45 L70 45 M30 45 L50 85 L70 45" fill="none" stroke="url(#humanGrad)" strokeWidth="0.5" />
                            <path d="M30 45 L15 70 M70 45 L85 70" fill="none" stroke="url(#humanGrad)" strokeWidth="0.5" />
                            <path d="M50 85 L35 130 M50 85 L65 130" fill="none" stroke="url(#humanGrad)" strokeWidth="0.5" />
                            {[...Array(5)].map((_, i) => (
                                <ellipse key={i} cx="50" cy="75" rx={25 + i*5} ry={60 + i*5} fill="none" stroke="#ec4899" strokeWidth="0.05" strokeOpacity={0.2 - i*0.04} />
                            ))}
                        </svg>
                    </div>
                    <h2 className="text-pink-400 font-mono text-[10px] tracking-[0.6em] uppercase mb-10 animate-pulse text-center">
                        {isActive ? "Sincronização em Curso" : "Entidade Biocinética Identificada"}
                    </h2>
                    <button onClick={activate} disabled={isActive} className="group relative px-16 py-5 rounded-full border border-pink-500/40 hover:border-pink-500 transition-all duration-700 bg-black/40 backdrop-blur-md">
                        <span className="relative z-10 text-white font-mono text-xs tracking-[0.3em] uppercase">Aceder à Interface</span>
                    </button>
                </div>
            );
        }

        function App() {
            const [entered, setEntered] = useState(false);
            const [mode, setMode] = useState('biokinetic');
            const [synapseStrength, setSynapseStrength] = useState(60);
            const [evolutionSpeed, setEvolutionSpeed] = useState(40); // Restaurado
            const [rotation, setRotation] = useState(0);
            const [logs, setLogs] = useState([]); // Restaurado
            const [activeLayers, setActiveLayers] = useState(5); // Restaurado

            // Efeito de Rotação Restaurado com Velocidade Variável
            useEffect(() => {
                const interval = setInterval(() => {
                    if (entered) {
                        setRotation(r => (r + (evolutionSpeed / 100)) % 360);
                    }
                }, 16);
                return () => clearInterval(interval);
            }, [entered, evolutionSpeed]);

            // Sistema de Logs Restaurado
            useEffect(() => {
                if(!entered) return;
                const interval = setInterval(() => {
                    const newLog = `> [${new Date().toLocaleTimeString()}] Fluxo_${mode.toUpperCase()}: ${Math.random().toString(16).slice(2, 8).toUpperCase()}`;
                    setLogs(prev => [newLog, ...prev].slice(0, 15));
                }, 3000);
                return () => clearInterval(interval);
            }, [entered, mode]);

            const network = useMemo(() => {
                const nodes = [];
                const pointsPerLayer = mode === 'swarm' ? 12 : 8;
                for (let l = 1; l <= activeLayers; l++) {
                    for (let i = 0; i < pointsPerLayer; i++) {
                        const angle = (i / pointsPerLayer) * Math.PI * 2 + (l * 0.2);
                        const radius = l * 9;
                        nodes.push({
                            id: `n-${l}-${i}`,
                            x: 50 + Math.cos(angle) * radius,
                            y: 50 + Math.sin(angle) * radius,
                            layer: l,
                            active: Math.random() > 0.3
                        });
                    }
                }
                return nodes;
            }, [mode, activeLayers]);

            if (!entered) return <IntroPortal onEnter={() => setEntered(true)} />;

            return (
                <div className="h-screen w-full flex flex-col p-4 md:p-6 relative overflow-hidden animate-in fade-in duration-1000 grid-overlay">
                    {/* Header */}
                    <header className="flex flex-col md:flex-row justify-between items-center mb-6 glass-panel p-5 rounded-[2.5rem] shrink-0 gap-4 z-10">
                        <div className="flex items-center gap-5">
                            <div className="w-12 h-12 rounded-full bg-pink-600/20 border border-pink-500/30 flex items-center justify-center relative">
                                <div className="absolute inset-0 bg-pink-500/10 rounded-full animate-ping"></div>
                                <span className="text-pink-400 font-bold">Ψ</span>
                            </div>
                            <div>
                                <h1 className="text-xl font-black tracking-tighter text-white uppercase flex items-center gap-3">
                                    Módulo_06
                                    <span className="text-[10px] bg-pink-500/10 px-3 py-1 rounded-full font-mono font-normal tracking-widest text-pink-400 border border-pink-500/20">INTEGRIDADE_TOTAL</span>
                                </h1>
                                <p className="text-[9px] font-mono text-slate-500 tracking-[0.4em] uppercase mt-1">Status: Consciência Sincronizada</p>
                            </div>
                        </div>
                        <nav className="flex gap-2">
                            {AI_MODES.map(m => (
                                <button key={m.id} onClick={() => setMode(m.id)} className={`px-4 py-2 rounded-xl text-[9px] font-mono uppercase tracking-widest transition-all border ${mode === m.id ? 'bg-pink-500/20 border-pink-500/50 text-white' : 'border-white/5 text-slate-600'}`}>
                                    {m.id}
                                </button>
                            ))}
                        </nav>
                    </header>

                    <div className="flex-1 flex flex-col md:flex-row gap-6 min-h-0">
                        {/* Sidebar com Moduladores Restaurados */}
                        <aside className="w-full md:w-80 flex flex-col shrink-0 min-h-0 z-10">
                            <div className="glass-panel p-8 rounded-[3rem] flex-1 flex flex-col min-h-0 overflow-y-auto custom-scroll">
                                <h3 className="text-[10px] font-mono text-pink-400 uppercase tracking-widest mb-6 flex items-center gap-3">
                                    <span className="w-4 h-[1px] bg-pink-500"></span> Bio_Moduladores
                                </h3>
                                
                                <div className="space-y-8">
                                    <div>
                                        <div className="flex justify-between text-[10px] font-mono text-slate-500 mb-2 uppercase tracking-tighter">
                                            <span>Intensidade_Sináptica</span>
                                            <span className="text-pink-400 font-bold">{synapseStrength}%</span>
                                        </div>
                                        <input type="range" min="10" max="100" value={synapseStrength} onChange={(e) => setSynapseStrength(parseInt(e.target.value))} className="w-full h-1 bg-white/5 appearance-none rounded-full accent-pink-500 cursor-pointer" />
                                    </div>

                                    <div>
                                        <div className="flex justify-between text-[10px] font-mono text-slate-500 mb-2 uppercase tracking-tighter">
                                            <span>Velocidade_Evolutiva</span>
                                            <span className="text-pink-400 font-bold">{evolutionSpeed}ms</span>
                                        </div>
                                        <input type="range" min="1" max="100" value={evolutionSpeed} onChange={(e) => setEvolutionSpeed(parseInt(e.target.value))} className="w-full h-1 bg-white/5 appearance-none rounded-full accent-pink-500 cursor-pointer" />
                                    </div>

                                    <div>
                                        <div className="flex justify-between text-[10px] font-mono text-slate-500 mb-2 uppercase tracking-tighter">
                                            <span>Profundidade_Camadas</span>
                                            <span className="text-pink-400 font-bold">{activeLayers}</span>
                                        </div>
                                        <input type="range" min="1" max="8" value={activeLayers} onChange={(e) => setActiveLayers(parseInt(e.target.value))} className="w-full h-1 bg-white/5 appearance-none rounded-full accent-pink-500 cursor-pointer" />
                                    </div>

                                    <div className="mt-auto border-t border-white/5 pt-6">
                                        <h4 className="text-[8px] font-mono text-slate-600 uppercase mb-3">Live_System_Log</h4>
                                        <div className="space-y-1 overflow-hidden h-32">
                                            {logs.map((log, i) => (
                                                <p key={i} className="text-[8px] font-mono text-pink-500/60 truncate">{log}</p>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </aside>

                        {/* Main Visualizer com Metadados Restaurados */}
                        <main className="flex-1 glass-panel rounded-[3.5rem] relative overflow-hidden border-pink-500/10 z-0">
                            <div className="absolute inset-0 flex items-center justify-center">
                                <svg viewBox="0 0 100 100" className="w-[85%] h-[85%]" style={{ transform: `rotate(${rotation}deg)` }}>
                                    <defs>
                                        <radialGradient id="nodeGrad" cx="50%" cy="50%" r="50%">
                                            <stop offset="0%" stopColor="#ec4899" />
                                            <stop offset="100%" stopColor="#8b5cf6" />
                                        </radialGradient>
                                    </defs>
                                    {network.map((n, i) => {
                                        const next = network[(i + 1) % network.length];
                                        if (n.layer !== next.layer) return null;
                                        return (
                                            <line key={`path-${i}`} x1={n.x} y1={n.y} x2={next.x} y2={next.y} stroke="currentColor" className="text-pink-500/10 neural-path" strokeWidth="0.1" />
                                        );
                                    })}
                                    {network.map((n) => (
                                        <circle key={n.id} cx={n.x} cy={n.y} r={n.active ? 0.8 : 0.4} fill={n.active ? "url(#nodeGrad)" : "#1e1b4b"} style={{ opacity: n.active ? (synapseStrength/100) : 0.2 }} />
                                    ))}
                                    <circle cx="50" cy="50" r="1.2" fill="white" className="animate-pulse" />
                                </svg>
                            </div>
                            
                            {/* Metadados Flutuantes Restaurados */}
                            <div className="absolute top-10 left-10 text-white/40 font-mono text-[8px] space-y-1">
                                <p>X_COORD: {(rotation * 1.5).toFixed(2)}</p>
                                <p>Y_COORD: {(synapseStrength * 0.8).toFixed(2)}</p>
                                <p>ENTITY: ORACLE_V6_HUMAN</p>
                            </div>

                            <div className="absolute bottom-10 right-10 flex flex-col items-end gap-2">
                                <div className="px-4 py-2 bg-pink-500/10 backdrop-blur-xl border border-pink-500/20 rounded-2xl">
                                    <p className="text-[8px] font-mono text-pink-400 uppercase mb-1">Processamento_Recursivo</p>
                                    <p className="text-xs font-bold text-white tracking-widest uppercase italic">{mode}</p>
                                </div>
                            </div>
                        </main>
                    </div>

                    {/* Footer */}
                    <footer className="mt-6 flex flex-col md:flex-row justify-between items-center px-10 py-5 glass-panel rounded-[2.5rem] shrink-0 border-t border-pink-500/10 z-10">
                        <div className="flex gap-12 text-[8px] font-mono text-slate-500 uppercase tracking-widest">
                            <p>Sinal: <span className="text-green-500">Exclente</span></p>
                            <p>Latência: <span className="text-white">12ms</span></p>
                            <p>Protocolo: <span className="text-pink-500">Ma'at_OS</span></p>
                        </div>
                        <div className="flex items-center gap-4">
                            <span className="text-[9px] text-pink-400 font-bold uppercase tracking-widest glow-text">INTEGRIDADE_RESTAURADA_100%</span>
                            <div className="w-10 h-10 rounded-xl bg-pink-500/10 border border-pink-500/20 flex items-center justify-center">
                                <div className="w-5 h-5 border-2 border-pink-500/30 border-t-pink-500 rounded-full animate-spin"></div>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
